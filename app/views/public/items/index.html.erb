<div class="container">
<div class="row">
    <div class="col-lg-6">
      <h2>アイテム在庫一覧</h2>
      <div class="items-list text-field">
        <% if @items.count >= 1 %>
          <table class="col">
            <% @items.each do |item| %>
            <tr>
              <td class="bold"><%= link_to item.item_name, public_item_path(item.id), class: "item-link" %></td>
              <td><%= item.amount %>袋</td>
              <td>
                <%= item.total_capacity %>
                <% if item.total_capacity %>g<% end %>
              </td>
            </tr>

            <tr>
              <td colspan="2">
                <%= form_with model: item, url: public_item_path(item.id), method: :patch do |f|  %>
                  <div class="d-flex col">
                    <%= f.number_field :amount, value: nil, placeholder: "入力してください", required:true, class: "col-8 form-control" %>
                    <%= f.hidden_field :item_name, :value => item.item_name %>
                    <%= f.hidden_field :customer_id, :value => current_customer.id %>
                    <%= f.submit "追加", class: "btn-change btn-sm ml-3" %>
                  </div>
                <% end %>
              </td>
              <td>
                <%= button_to public_item_path(item.id), method: :delete, data: {confirm: "本当に削除しますか？"} do %>
                      <i class="fas fa-solid fa-trash"></i>
                <% end %>
              </td>
            </tr>
            <% end %>
          </table>
        <% else %>
          <div class="not-items-list col">
            <p>
            アイテムは登録されていません
            </p>
          </div>
        <% end %>
      </div>
    </div>

    <div class="col-lg-6">
      <h2>アイテム登録</h2>
        <%= form_with model: @item, url: public_items_path, method: :post do |f| %>
          <div class="item-record">
            <table class="col-sm-10 m-auto">
            <%= f.hidden_field :customer_id, :value => current_customer.id %>
            <tr>
              <td class="row">
                <%= f.label :item_name, "商品名", class: "col-form-label col-4" %>
                <%= f.text_field :item_name, :placeholder => "例：チンチラセレクションプロ", class: "form-control col-8" %>
              </td>
            </tr>
            <tr>
              <td class="row">
                <%= f.label :amount, "個数", class: "col-form-label col-4" %>
                <%= f.select :amount, *[1..10], { include_blank: '個数選択'}, class: "form-control col-8" %>
              </td>
            </tr>
            <tr>
              <td class="row">
                <%= f.label :capacity, "内容量", class: "col-form-label col-4" %>
                <%= f.number_field :capacity, :placeholder => "例：100g",  class: "form-control col-8" %>
              </td>
            </tr>
            <tr>
              <td class="row mt-3">
                <div class="col-form-label col-4"></div>
                <div class="col-8 p-0"><%= f.submit "登録", class: "btn-change btn-block" %></div>
              </td>
            </tr>
            </table>
          </div>
        <% end %>
    </div>

  </div>
  </div>
