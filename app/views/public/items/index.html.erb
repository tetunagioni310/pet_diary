<div class="container">
<div class="row">
    <div class="col-md-6">
      <h2>消耗品在庫一覧</h2>
      <div class="items-list">
        <table class="col">
          <% @items.each do |item| %>
          <tr>
            <td class="bold"><%= link_to item.item_name, public_item_path(item.id), class: "item-link" %></td>
            <td><%= item.amount %>袋</td>
            <td>
              <%= item.total_capacity %>
              <% if item.total_capacity %>g<% end %>
            </td>
          </tr>

          <tr>
            <%= form_with model: item, url: public_item_path(item.id), method: :patch do |f|  %>
            <td>
              <%= f.number_field :amount, value: "",required:true, class: "form-control" %>
              <%= f.hidden_field :item_name, :value => item.item_name %>
              <%= f.hidden_field :customer_id, :value => current_customer.id %>
            </td>
            <td><%= f.submit "追加", class: "btn btn-sm btn-success" %></td>
            <% end %>
            <td>
              <%= link_to "削除", public_item_path(item.id), method: :delete, data: {confirm: "本当に削除しますか？"}, class: "btn btn-sm btn-danger" %>
            </td>
          </tr>
          <% end %>
        </table>
      </div>
    </div>

    <div class="col-md-6">
      <h2>消耗品登録</h2>
      <div class="item-record">
        <table class="col-sm-10 m-auto">
        <%= form_with model: @item, url: public_items_path, method: :post do |f| %>
        <%= render "public/shared/error_messages", resource: @item %>

          <%= f.hidden_field :customer_id, :value => current_customer.id %>
          <tr>
            <td class="row">
              <%= f.label :item_name, "商品名", class: "col-form-label col-4" %>
              <%= f.text_field :item_name, class: "form-control col-8" %>
            </td>
          </tr>
          <tr>
            <td class="row">
              <%= f.label :amount, "個数", class: "col-form-label col-4" %>
              <%= f.select :amount, *[1..10], { include_blank: '個数選択'}, required:true, class: "form-control col-8" %>
            </td>
          </tr>
          <tr>
            <td class="row">
              <%= f.label :capacity, "内容量", class: "col-form-label col-4" %>
              <%= f.number_field :capacity,  class: "form-control col-8" %>
            </td>
          </tr>
          <tr>
            <td class="row mt-3">
              <div class="col-form-label col-4"></div>
              <div class="col-8 p-0"><%= f.submit "登録", class: "btn btn-success btn-block" %></div>
            </td>
          </tr>
        <% end %>
        </table>
      </div>
    </div>

  </div>
  </div>
