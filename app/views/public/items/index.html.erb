<div class="container">
  <div class="row mt-5">
      <div class="col-lg-6">
        <div class="h4 bold">アイテム在庫一覧</div>
        <div class="items-list text-field">
          <% if @items.count >= 1 %>
            <table class="col">
              <% @items.each do |item| %>
              <tr>
                <td class="bold"><%= link_to item.item_name, public_item_path(item.id), class: "item-link" %></td>
                <td><%= item.amount.to_s + "袋" %></td>
                <td>
                  <%= item.total_capacity %>
                  <% if item.total_capacity %><%= item.unit_i18n %><% end %>
                </td>
              </tr>

              <tr>
                <td colspan="2">
                  <%= form_with model: item, url: public_item_path(item.id), method: :patch do |f|  %>
                    <div class="d-flex col">
                      <%= f.number_field :amount, value: nil, placeholder: "数量を入力してください", required:true, class: "col-8 form-control" %>
                      <%= f.hidden_field :item_name, :value => item.item_name %>
                      <%= f.submit "追加", class: "btn btn-success btn-sm ml-3" %>
                    </div>
                  <% end %>
                </td>
                <td>
                  <%= button_to public_item_path(item.id), method: :delete, data: {confirm: "本当に削除しますか？"} do %>
                        <i class="fas fa-solid fa-trash"></i>
                  <% end %>
                </td>
              </tr>
              <% end %>
            </table>
          <% else %>
            <div class="not-items-list col">
              <p>
              アイテムは登録されていません
              </p>
            </div>
          <% end %>
        </div>
      </div>

      <div class="col-lg-6">
        <div class="h4 bold">アイテム登録</div>
        <div class="item-record">
          <%= form_with model: @item, url: public_items_path, method: :post do |f| %>
          <%= render "public/shared/error_messages", resource: @item %>
              <table class="col-sm-10 m-auto">
                <tr>
                  <td class="row">
                    <%= f.label :item_name, "商品名", class: "col-form-label col-4" %>
                    <%= f.text_field :item_name, :placeholder => "例：チンチラセレクションプロ", class: "form-control col-8" %>
                  </td>
                </tr>
                <tr>
                  <td class="row">
                    <%= f.label :amount, "個数", class: "col-form-label col-4" %>
                    <%= f.select :amount, *[1..10], { include_blank: '個数選択'}, class: "form-control col-8" %>
                  </td>
                </tr>
                <tr>
                  <td class="row align-items-center">
                    <%= f.label :unit, "消費単位", class: "col-form-label col-4" %>

                    <%= f.radio_button :unit, Item.units.key(0) %>
                    <%= f.label :unit, Item.units_i18n[:grams] %>

                    <%= f.radio_button :unit, Item.units.key(1), class: "ml-2" %>
                    <%= f.label :unit, Item.units_i18n[:sheets] %>

                    <%= f.radio_button :unit, Item.units.key(2), class: "ml-2" %>
                    <%= f.label :unit, Item.units_i18n[:pieces] %>
                  </td>
                </tr>
                <tr>
                  <td class="row">
                    <%= f.label :capacity, "内容量", class: "col-form-label col-4" %>
                    <%= f.number_field :capacity, :placeholder => "数字のみ記載ください",  class: "form-control col-8" %>
                  </td>
                </tr>
                <tr>
                  <td class="row mt-3">
                    <div class="col-form-label col-4"></div>
                    <div class="col-8 p-0"><%= f.submit "登録", class: "btn btn-success btn-block" %></div>
                  </td>
                </tr>
              </table>
          <% end %>
        </div>
      </div>

    </div>
</div>
